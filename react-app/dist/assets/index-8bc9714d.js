var e=Object.defineProperty,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,t=(a,s,l)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[s]=l,n=(e,a,s)=>new Promise((l,t)=>{var n=e=>{try{o(s.next(e))}catch(a){t(a)}},r=e=>{try{o(s.throw(e))}catch(a){t(a)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(n,r);o((s=s.apply(e,a)).next())});import{r,a as o,R as i}from"./vendor-7d076019.js";import{P as c}from"./plotly-ed50dd74.js";import{a as d}from"./utils-7d4d4b40.js";import"ext/globalThis-this";import"css-globalThis-keywords";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)}).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();var m={exports:{}},h={},p=r,u=Symbol.for("react.element"),x=Symbol.for("react.fragment"),g=Object.prototype.hasOwnProperty,j=p.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y={key:!0,ref:!0,__self:!0,__source:!0};function v(e,a,s){var l,t={},n=null,r=null;for(l in void 0!==s&&(n=""+s),void 0!==a.key&&(n=""+a.key),void 0!==a.ref&&(r=a.ref),a)g.call(a,l)&&!y.hasOwnProperty(l)&&(t[l]=a[l]);if(e&&e.defaultProps)for(l in a=e.defaultProps)void 0===t[l]&&(t[l]=a[l]);return{$$typeof:u,type:e,key:n,ref:r,props:t,_owner:j.current}}h.Fragment=x,h.jsx=v,h.jsxs=v,m.exports=h;var f=m.exports,b={},N=o;b.createRoot=N.createRoot,b.hydrateRoot=N.hydrateRoot;const S=({data:e,ticker:a,period:s})=>{const l=r.useMemo(()=>{var a,l,t,n;if(!(null==e?void 0:e.data)||0===e.data.length)return null;const r=e.data,{minSlope120:o,minSlope200:i}=e.analysis;let c=r;"max"!==s&&r.displayStartDate&&(c=r.filter(e=>new Date(e.date)>=r.displayStartDate),console.log(`ğŸ¯ Display data filtered: ${c.length} days for chart (${s} years)`));const d=c.map(e=>e.date),m=c.map(e=>e.close),h=c.map(e=>e.ma120||null),p=c.map(e=>e.ma200||null);console.log(`ğŸ“Š Chart data: ${d.length} points`),console.log(`ğŸ“ˆ Price range: $${Math.min(...m.filter(e=>e)).toFixed(2)} - $${Math.max(...m).toFixed(2)}`),console.log(`ğŸ”´ 120ì¼ ì´í‰ ìœ íš¨ í¬ì¸íŠ¸: ${h.filter(e=>null!==e).length}ê°œ`),console.log(`ğŸ”µ 200ì¼ ì´í‰ ìœ íš¨ í¬ì¸íŠ¸: ${p.filter(e=>null!==e).length}ê°œ`);const u=[{x:d,y:m,type:"scatter",mode:"lines",name:"Close Price",line:{color:"darkgray",width:1},hovertemplate:"<b>%{x}</b><br>Close: $%{y:.2f}<extra></extra>"},{x:d,y:h,type:"scatter",mode:"lines",name:"120-day MA",line:{color:"red",width:2},hovertemplate:"<b>%{x}</b><br>120-day MA: $%{y:.2f}<extra></extra>"},{x:d,y:p,type:"scatter",mode:"lines",name:"200-day MA",line:{color:"blue",width:2},hovertemplate:"<b>%{x}</b><br>200-day MA: $%{y:.2f}<extra></extra>"}];if(o&&null!==o.ma120){const e=new Date(o.date),s=new Date(d[0]),t=new Date(d[d.length-1]),n=e>=s&&e<=t;console.log(`ğŸ”´ 120ì¼ ì‹ í˜¸ ì§€ì : ${o.date}`),console.log(`ğŸ“Š ì°¨íŠ¸ ë²”ìœ„: ${d[0]} ~ ${d[d.length-1]}`),console.log("âœ… ì‹ í˜¸ ì§€ì  ì°¨íŠ¸ ë‚´ í¬í•¨: "+(n?"YES":"NO")),n?(console.log(`ğŸ”´ Adding 120ì¼ ë§ˆì»¤: ${o.date} at $${o.ma120.toFixed(2)} (ê¸°ìš¸ê¸°: ${null==(a=o.ma120Slope)?void 0:a.toFixed(6)})`),u.push({x:[o.date],y:[o.ma120],type:"scatter",mode:"markers+text",name:"Lowest Slope Point 120 MA",marker:{color:"red",size:12,symbol:"circle",line:{color:"white",width:2}},text:["Lowest Slope 120 MA"],textposition:"top center",textfont:{size:10,color:"red",family:"Arial"},hovertemplate:`<b>ğŸ”´ 120ì¼ ìµœì € ê¸°ìš¸ê¸° ì§€ì </b><br><b>ë‚ ì§œ:</b> %{x}<br><b>120ì¼ ì´í‰:</b> $%{y:.2f}<br><b>ê¸°ìš¸ê¸°:</b> ${null==(l=o.ma120Slope)?void 0:l.toFixed(6)}<extra></extra>`,showlegend:!0})):console.log("âš ï¸ 120ì¼ ì‹ í˜¸ ì§€ì ì´ ì°¨íŠ¸ ë²”ìœ„ ë°–ì— ìˆìŒ")}if(i&&null!==i.ma200){const e=new Date(i.date),a=new Date(d[0]),s=new Date(d[d.length-1]),l=e>=a&&e<=s;console.log(`ğŸ”µ 200ì¼ ì‹ í˜¸ ì§€ì : ${i.date}`),console.log(`ğŸ“Š ì°¨íŠ¸ ë²”ìœ„: ${d[0]} ~ ${d[d.length-1]}`),console.log("âœ… ì‹ í˜¸ ì§€ì  ì°¨íŠ¸ ë‚´ í¬í•¨: "+(l?"YES":"NO")),l?(console.log(`ğŸ”µ Adding 200ì¼ ë§ˆì»¤: ${i.date} at $${i.ma200.toFixed(2)} (ê¸°ìš¸ê¸°: ${null==(t=i.ma200Slope)?void 0:t.toFixed(6)})`),u.push({x:[i.date],y:[i.ma200],type:"scatter",mode:"markers+text",name:"Lowest Slope Point 200 MA",marker:{color:"blue",size:12,symbol:"star",line:{color:"white",width:2}},text:["Lowest Slope 200 MA"],textposition:"top center",textfont:{size:10,color:"blue",family:"Arial"},hovertemplate:`<b>ğŸ”µ 200ì¼ ìµœì € ê¸°ìš¸ê¸° ì§€ì </b><br><b>ë‚ ì§œ:</b> %{x}<br><b>200ì¼ ì´í‰:</b> $%{y:.2f}<br><b>ê¸°ìš¸ê¸°:</b> ${null==(n=i.ma200Slope)?void 0:n.toFixed(6)}<extra></extra>`,showlegend:!0})):console.log("âš ï¸ 200ì¼ ì‹ í˜¸ ì§€ì ì´ ì°¨íŠ¸ ë²”ìœ„ ë°–ì— ìˆìŒ")}return console.log(`ğŸ“Š Chart traces generated: ${u.length} traces`),console.log(`ğŸ“ˆ Data points: ${d.length}`),console.log("ğŸ”´ 120ì¼ ì‹ í˜¸ í‘œì‹œ: "+(o?"YES":"NO")),console.log("ğŸ”µ 200ì¼ ì‹ í˜¸ í‘œì‹œ: "+(i?"YES":"NO")),u},[e]),t={title:{text:`${a} Stock Price and Moving Averages (${"max"===s?"Max":s+" years"})`,font:{size:18,family:"Arial, sans-serif"}},xaxis:{title:"Date",type:"date",showgrid:!0,gridcolor:"#f0f0f0"},yaxis:{title:"Price ($)",showgrid:!0,gridcolor:"#f0f0f0"},hovermode:"x unified",showlegend:!0,legend:{x:0,y:1,bgcolor:"rgba(255,255,255,0.9)",bordercolor:"#ddd",borderwidth:1},plot_bgcolor:"#fafafa",paper_bgcolor:"white",margin:{t:80,r:30,b:60,l:80},height:600},n={responsive:!0,displayModeBar:!0,modeBarButtonsToRemove:["lasso2d","select2d","autoScale2d","hoverClosestCartesian","hoverCompareCartesian","toggleSpikelines"],displaylogo:!1,toImageButtonOptions:{format:"png",filename:`${a}_moving_averages_${s}y`,height:600,width:1e3,scale:1}};return l?f.jsxs("div",{className:"chart-container",children:[f.jsxs("div",{className:"chart-header",children:[f.jsxs("h2",{children:["ğŸ“Š ",a," ì£¼ì‹ ì°¨íŠ¸"]}),f.jsxs("div",{className:"chart-info",children:[f.jsxs("span",{children:["ğŸ“ˆ ì´ ",e.data.length,"ì¼ ë°ì´í„°"]}),f.jsxs("span",{children:["ğŸ”´ 120ì¼ ì´í‰ ",e.analysis.ma120Days,"ê°œ"]}),f.jsxs("span",{children:["ğŸ”µ 200ì¼ ì´í‰ ",e.analysis.ma200Days,"ê°œ"]})]})]}),f.jsx(c,{data:l,layout:t,config:n,style:{width:"100%",height:"600px"},useResizeHandler:!0})]}):f.jsx("div",{className:"chart-container",children:f.jsx("div",{className:"chart-placeholder",children:f.jsx("p",{children:"ì°¨íŠ¸ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."})})})},w=({onLoadData:e,loading:a,defaultTicker:s="QQQ"})=>{const[l,t]=r.useState(s),[n,o]=r.useState("3"),i=["MSFT","AAPL","NVDA","GOOGL","TSLA","AMZN","TSM","LLY","NOV","AVGO","ORCL","NFLX","META","QQQ","SPY"];return f.jsxs("div",{className:"controls-container",children:[f.jsxs("form",{onSubmit:s=>{s.preventDefault(),l.trim()&&!a&&e(l.trim().toUpperCase(),n)},className:"stock-controls",children:[f.jsxs("div",{className:"control-group",children:[f.jsx("label",{htmlFor:"ticker",className:"control-label",children:"ì£¼ì‹ í‹°ì»¤:"}),f.jsxs("div",{className:"ticker-input-container",children:[f.jsx("input",{id:"ticker",type:"text",value:l,onChange:e=>{t(e.target.value.toUpperCase())},placeholder:"AAPL, MSFT, QQQ...",className:"ticker-input",disabled:a,maxLength:10}),f.jsxs("div",{className:"input-hint",children:["ì˜ˆì‹œ: ",i.slice(0,4).join(", ")]})]})]}),f.jsxs("div",{className:"control-group",children:[f.jsx("label",{htmlFor:"period",className:"control-label",children:"ê¸°ê°„:"}),f.jsx("select",{id:"period",value:n,onChange:e=>o(e.target.value),className:"period-select",disabled:a,children:[{value:"3",label:"3 years"},{value:"6",label:"6 years"},{value:"9",label:"9 years"},{value:"12",label:"12 years"},{value:"max",label:"Max"}].map(e=>f.jsx("option",{value:e.value,children:e.label},e.value))})]}),f.jsx("button",{type:"submit",className:"load-button "+(a?"loading":""),disabled:a||!l.trim(),children:a?f.jsxs(f.Fragment,{children:[f.jsx("span",{className:"spinner"}),"Loading..."]}):"ğŸ“Š Load Data"})]}),f.jsxs("div",{className:"quick-select",children:[f.jsx("h3",{children:"ë¹ ë¥¸ ì„ íƒ:"}),f.jsx("div",{className:"quick-buttons",children:i.map(s=>f.jsx("button",{onClick:()=>{return t(l=s),void(a||e(l,n));var l},className:"quick-button "+(l===s?"active":""),disabled:a,title:`${s} ë°ì´í„° ë¡œë“œ`,children:s},s))})]})]})},A=({data:e,ticker:a})=>{var s,l,t,n,o,i;const c=r.useMemo(()=>{if(!(null==e?void 0:e.data)||!e.analysis)return null;const{minSlope120:a,minSlope200:s}=e.analysis,l=e.data;return{minSlope120:a,minSlope200:s,latestData:l[l.length-1],totalDays:l.length,ma120Days:e.analysis.ma120Days,ma200Days:e.analysis.ma200Days}},[e]);if(!c)return f.jsx("div",{className:"analysis-placeholder",children:"ë¶„ì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤."});const{minSlope120:d,minSlope200:m,latestData:h}=c,p=e=>e?e>.5?{text:"ê°•í•œ ìƒìŠ¹",emoji:"ğŸš€",className:"strong-up"}:e>0?{text:"ìƒìŠ¹",emoji:"ğŸ“ˆ",className:"up"}:e<-.5?{text:"ê°•í•œ í•˜ë½",emoji:"ğŸ“‰",className:"strong-down"}:e<0?{text:"í•˜ë½",emoji:"ğŸ“‰",className:"down"}:{text:"ë³´í•©",emoji:"â¡ï¸",className:"neutral"}:{text:"N/A",emoji:"â“",className:"neutral"},u=p(h.ma120Slope),x=p(h.ma200Slope);return f.jsxs("div",{className:"analysis-container",children:[f.jsxs("div",{className:"analysis-header",children:[f.jsxs("h2",{children:["ğŸ“Š ",a," ì´ë™í‰ê· ì„  ë¶„ì„"]}),f.jsxs("div",{className:"analysis-summary",children:[f.jsxs("span",{children:["ì´ ",c.totalDays,"ì¼ ë°ì´í„°"]}),f.jsx("span",{children:"|"}),f.jsxs("span",{children:["120ì¼ ì´í‰: ",c.ma120Days,"ê°œ"]}),f.jsx("span",{children:"|"}),f.jsxs("span",{children:["200ì¼ ì´í‰: ",c.ma200Days,"ê°œ"]})]})]}),f.jsxs("div",{className:"analysis-grid",children:[d&&f.jsxs("div",{className:"analysis-card slope-analysis",children:[f.jsxs("div",{className:"card-header",children:[f.jsx("h3",{children:"ğŸ”´ 120ì¼ ì´ë™í‰ê·  ìµœì € ê¸°ìš¸ê¸° ì§€ì "}),f.jsx("span",{className:"signal-marker",children:"â— ì›í˜• ë§ˆì»¤"})]}),f.jsxs("div",{className:"card-content",children:[f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ“… ë‚ ì§œ:"}),f.jsx("span",{className:"metric-value",children:d.date})]}),f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ’° 120ì¼ ì´í‰ê°€:"}),f.jsxs("span",{className:"metric-value",children:["$",null==(s=d.ma120)?void 0:s.toFixed(2)]})]}),f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ“‰ ê¸°ìš¸ê¸°:"}),f.jsx("span",{className:"metric-value negative",children:null==(l=d.ma120Slope)?void 0:l.toFixed(6)})]}),f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ“Š ì°¨íŠ¸ í‘œì‹œ:"}),f.jsxs("span",{className:"signal-indicator",children:[f.jsx("span",{className:"signal-dot red"}),"ë¹¨ê°„ ì›í˜• ë§ˆì»¤ë¡œ í‘œì‹œë¨"]})]}),f.jsxs("p",{className:"analysis-note",children:[f.jsx("strong",{children:"ğŸ“ ì°¨íŠ¸ì—ì„œ ë¹¨ê°„ìƒ‰ ì›í˜•(â—) ë§ˆì»¤ë¥¼ í™•ì¸í•˜ì„¸ìš”!"}),f.jsx("br",{}),"ì´ ì§€ì ì€ 120ì¼ ì´ë™í‰ê· ì„ ì˜ ê¸°ìš¸ê¸°ê°€ ê°€ì¥ ê¸‰ê²©í•˜ê²Œ í•˜ë½í•œ ì‹œì ìœ¼ë¡œ, ì‹œì¥ ì¡°ì •ì´ë‚˜ í•˜ë½ íŠ¸ë Œë“œì˜ ê°€ì†í™”ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤."]})]})]}),m&&f.jsxs("div",{className:"analysis-card slope-analysis",children:[f.jsxs("div",{className:"card-header",children:[f.jsx("h3",{children:"ğŸ”µ 200ì¼ ì´ë™í‰ê·  ìµœì € ê¸°ìš¸ê¸° ì§€ì "}),f.jsx("span",{className:"signal-marker",children:"â˜… ë³„ ë§ˆì»¤"})]}),f.jsxs("div",{className:"card-content",children:[f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ“… ë‚ ì§œ:"}),f.jsx("span",{className:"metric-value",children:m.date})]}),f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ’° 200ì¼ ì´í‰ê°€:"}),f.jsxs("span",{className:"metric-value",children:["$",null==(t=m.ma200)?void 0:t.toFixed(2)]})]}),f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ“‰ ê¸°ìš¸ê¸°:"}),f.jsx("span",{className:"metric-value negative",children:null==(n=m.ma200Slope)?void 0:n.toFixed(6)})]}),f.jsxs("div",{className:"metric-row",children:[f.jsx("span",{className:"metric-label",children:"ğŸ“Š ì°¨íŠ¸ í‘œì‹œ:"}),f.jsxs("span",{className:"signal-indicator",children:[f.jsx("span",{className:"signal-dot blue",children:"â˜…"}),"íŒŒë€ ë³„í˜• ë§ˆì»¤ë¡œ í‘œì‹œë¨"]})]}),f.jsxs("p",{className:"analysis-note",children:[f.jsx("strong",{children:"ğŸ“ ì°¨íŠ¸ì—ì„œ íŒŒë€ìƒ‰ ë³„í˜•(â˜…) ë§ˆì»¤ë¥¼ í™•ì¸í•˜ì„¸ìš”!"}),f.jsx("br",{}),"ì´ ì§€ì ì€ 200ì¼ ì´ë™í‰ê· ì„ ì˜ ê¸°ìš¸ê¸°ê°€ ê°€ì¥ ê¸‰ê²©í•˜ê²Œ í•˜ë½í•œ ì‹œì ìœ¼ë¡œ, ì¥ê¸° íŠ¸ë Œë“œ ì „í™˜ì ì„ ë‚˜íƒ€ë‚¼ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤."]})]})]}),h.ma120&&h.ma200&&f.jsxs("div",{className:"analysis-card current-trend",children:[f.jsxs("div",{className:"card-header",children:[f.jsx("h3",{children:"ğŸ“ˆ í˜„ì¬ íŠ¸ë Œë“œ ë¶„ì„"}),f.jsx("span",{className:"latest-date",children:h.date})]}),f.jsxs("div",{className:"card-content",children:[f.jsxs("div",{className:"trend-row",children:[f.jsx("span",{className:"trend-label",children:"120ì¼ ì´í‰ íŠ¸ë Œë“œ:"}),f.jsxs("span",{className:`trend-value ${u.className}`,children:[u.emoji," ",u.text,f.jsxs("small",{children:["(",h.ma120Slope>0?"+":"",null==(o=h.ma120Slope)?void 0:o.toFixed(4),")"]})]})]}),f.jsxs("div",{className:"trend-row",children:[f.jsx("span",{className:"trend-label",children:"200ì¼ ì´í‰ íŠ¸ë Œë“œ:"}),f.jsxs("span",{className:`trend-value ${x.className}`,children:[x.emoji," ",x.text,f.jsxs("small",{children:["(",h.ma200Slope>0?"+":"",null==(i=h.ma200Slope)?void 0:i.toFixed(4),")"]})]})]}),f.jsx("div",{className:"separator"}),f.jsxs("div",{className:"price-position",children:[f.jsx("h4",{children:"ğŸ’° í˜„ì¬ ì£¼ê°€ í¬ì§€ì…˜"}),f.jsxs("div",{className:"position-row",children:[f.jsx("span",{children:"í˜„ì¬ê°€:"}),f.jsxs("span",{className:"current-price",children:["$",h.close.toFixed(2)]})]}),f.jsxs("div",{className:"position-row",children:[f.jsx("span",{children:"120ì¼ ì´í‰ ëŒ€ë¹„:"}),f.jsxs("span",{className:h.close>h.ma120?"above":"below",children:[h.close>h.ma120?"âœ… ìƒíšŒ":"âŒ í•˜íšŒ",f.jsxs("small",{children:["(",(100*(h.close/h.ma120-1)).toFixed(1),"%)"]})]})]}),f.jsxs("div",{className:"position-row",children:[f.jsx("span",{children:"200ì¼ ì´í‰ ëŒ€ë¹„:"}),f.jsxs("span",{className:h.close>h.ma200?"above":"below",children:[h.close>h.ma200?"âœ… ìƒíšŒ":"âŒ í•˜íšŒ",f.jsxs("small",{children:["(",(100*(h.close/h.ma200-1)).toFixed(1),"%)"]})]})]})]})]})]}),f.jsxs("div",{className:"analysis-card technical-signals",children:[f.jsx("div",{className:"card-header",children:f.jsx("h3",{children:"ğŸ¯ ê¸°ìˆ ì  ì‹ í˜¸"})}),f.jsxs("div",{className:"card-content",children:[h.ma120&&h.ma200&&f.jsxs("div",{className:"signal-item",children:[f.jsx("span",{className:"signal-label",children:"ê³¨ë“  í¬ë¡œìŠ¤/ë°ë“œ í¬ë¡œìŠ¤:"}),f.jsx("span",{className:"signal-value "+(h.ma120>h.ma200?"bullish":"bearish"),children:h.ma120>h.ma200?"ğŸŒŸ ê³¨ë“  í¬ë¡œìŠ¤ (ê°•ì„¸)":"ğŸ’€ ë°ë“œ í¬ë¡œìŠ¤ (ì•½ì„¸)"})]}),f.jsxs("div",{className:"signal-item",children:[f.jsx("span",{className:"signal-label",children:"120ì¼ ì´í‰ ëª¨ë©˜í…€:"}),f.jsxs("span",{className:`signal-value ${u.className}`,children:[u.emoji," ",u.text]})]}),f.jsxs("div",{className:"signal-item",children:[f.jsx("span",{className:"signal-label",children:"200ì¼ ì´í‰ ëª¨ë©˜í…€:"}),f.jsxs("span",{className:`signal-value ${x.className}`,children:[x.emoji," ",x.text]})]})]})]})]})]})},$=()=>f.jsxs("div",{className:"loading-spinner",children:[f.jsx("div",{className:"spinner"}),f.jsx("p",{children:"ì£¼ì‹ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."}),f.jsx("small",{children:"ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”"})]}),D=({message:e})=>f.jsxs("div",{className:"error-message",children:[f.jsx("strong",{children:"âš ï¸ ì˜¤ë¥˜ ë°œìƒ:"})," ",e]}),k={ALPHA_VANTAGE:{baseURL:"https://www.alphavantage.co/query",key:"demo",function:"TIME_SERIES_DAILY"},FINNHUB:{baseURL:"https://finnhub.io/api/v1",key:"demo"},POLYGON:{baseURL:"https://api.polygon.io/v2",key:"demo"}};const F=new class{constructor(){this.currentAPI="YAHOO_DIRECT",this.cache=new Map,this.rateLimitDelay=1e3}setAPIKey(e,a){k[e].key=a}fetchStockData(e,a="3"){return n(this,null,function*(){const s=`${e}_${a}`;if(this.cache.has(s))return console.log("ğŸ“¦ Using cached data for",s),this.cache.get(s);try{let l;switch(this.currentAPI){case"YAHOO_DIRECT":l=yield this.fetchFromYahooDirect(e,a);break;case"ALPHA_VANTAGE":l=yield this.fetchFromAlphaVantage(e,a);break;case"FINNHUB":l=yield this.fetchFromFinnhub(e,a);break;default:throw new Error(`Unsupported API: ${this.currentAPI}`)}const t=this.processStockData(l,e,a);return this.cache.set(s,t),setTimeout(()=>this.cache.delete(s),6e5),t}catch(l){throw console.error("Error fetching stock data:",l),this.handleAPIError(l)}})}fetchFromYahooDirect(e,a){return n(this,null,function*(){const s=new Date,l=new Date;if("max"===a)l.setFullYear(l.getFullYear()-20);else{const e=parseInt(a);l.setFullYear(l.getFullYear()-e-1)}const t=Math.floor(l.getTime()/1e3),n=Math.floor(s.getTime()/1e3),r=`https://api.allorigins.win/raw?url=${encodeURIComponent(`https://query1.finance.yahoo.com/v7/finance/download/${e}?period1=${t}&period2=${n}&interval=1d&events=history&includeAdjustedClose=true`)}`;console.log(`ğŸš€ Fetching from Yahoo Finance via CORS proxy for ${e} (period: ${a})`),console.log(`ğŸ“… Date range: ${l.toISOString().split("T")[0]} to ${s.toISOString().split("T")[0]}`),console.log(`ğŸ”— Using proxy: ${r}`);try{const e=yield d.get(r,{timeout:3e4,responseType:"text",headers:{Accept:"text/csv"}});if(!e.data||e.data.includes("error")||!e.data.includes("Date"))throw new Error("Invalid CSV response from Yahoo Finance");return console.log(`ğŸ“Š Got ${e.data.split("\n").length-1} lines from Yahoo Finance`),this.parseYahooCSV(e.data,a)}catch(o){return console.error("Yahoo Finance Direct API failed:",o),console.log("ğŸ”„ Fallback to Alpha Vantage..."),this.currentAPI="ALPHA_VANTAGE",yield this.fetchFromAlphaVantage(e,a)}})}parseYahooCSV(e,a){var s,l;const t=e.trim().split("\n"),n=t[0].split(",");console.log(`ğŸ“Š CSV Headers: ${n.join(", ")}`);const r=[];for(let o=1;o<t.length;o++){const e=t[o].split(",");e.length<6||"null"===e[4]||r.push({date:e[0],open:parseFloat(e[1]),high:parseFloat(e[2]),low:parseFloat(e[3]),close:parseFloat(e[4]),volume:parseInt(e[6]||e[5])})}if(r.sort((e,a)=>new Date(e.date)-new Date(a.date)),"max"!==a){const e=parseInt(a),s=new Date,l=new Date;l.setFullYear(l.getFullYear()-e),r.displayStartDate=l,r.displayEndDate=s,console.log(`ğŸ¯ Display period will be: ${l.toISOString().split("T")[0]} to ${s.toISOString().split("T")[0]}`)}return console.log(`ğŸ“ˆ Parsed ${r.length} days from Yahoo Finance CSV`),console.log(`ğŸ“… Full data range: ${null==(s=r[0])?void 0:s.date} to ${null==(l=r[r.length-1])?void 0:l.date}`),r}fetchFromAlphaVantage(e,a){return n(this,null,function*(){const{baseURL:s,key:l,function:t}=k.ALPHA_VANTAGE,n={function:t,symbol:e,outputsize:"full",apikey:l};console.log(`ğŸš€ Fetching FULL data from Alpha Vantage for ${e} (period: ${a})`),console.log("ğŸ“Š Using outputsize=full to ensure sufficient data for 200-day MA");const r=yield d.get(s,{params:n,timeout:3e4});if(r.data["Error Message"])throw new Error(`Invalid symbol: ${e}`);if(r.data.Note)throw new Error("API rate limit exceeded. Please try again later.");const o=r.data["Time Series (Daily)"];if(!o)throw new Error("No data received from API");const i=this.convertAlphaVantageData(o,a);return console.log(`ğŸ“ˆ Fetched ${i.length} days of data`),i})}convertAlphaVantageData(e,a){var s,l;const t=Object.entries(e).map(([e,a])=>({date:e,close:parseFloat(a["4. close"]),open:parseFloat(a["1. open"]),high:parseFloat(a["2. high"]),low:parseFloat(a["3. low"]),volume:parseInt(a["5. volume"])})).sort((e,a)=>new Date(e.date)-new Date(a.date));if(console.log(`ğŸ“… Full data range: ${null==(s=t[0])?void 0:s.date} to ${null==(l=t[t.length-1])?void 0:l.date}`),"max"!==a){const e=parseInt(a),s=new Date,l=new Date;l.setFullYear(l.getFullYear()-e);const n=new Date(l);n.setDate(n.getDate()-250),console.log(`ğŸ“Š Filtering data: ${n.toISOString().split("T")[0]} to ${s.toISOString().split("T")[0]}`),console.log(`ğŸ¯ Target period: ${l.toISOString().split("T")[0]} to ${s.toISOString().split("T")[0]} (${e} years)`);const r=t.filter(e=>{const a=new Date(e.date);return a>=n&&a<=s});return console.log(`ğŸ“ˆ Filtered to ${r.length} days (includes buffer for moving averages)`),r.displayStartDate=l,r.displayEndDate=s,r}return console.log(`ğŸ“ˆ Using all ${t.length} days (Max period)`),t}processStockData(e,n,r){var o,i;if(!e||0===e.length)throw new Error("No data available");console.log(`ğŸ“Š Processing ${e.length} days of data for ${n}`),console.log(`ğŸ“… Data date range: ${null==(o=e[0])?void 0:o.date} to ${null==(i=e[e.length-1])?void 0:i.date}`),e.length<200&&console.warn(`âš ï¸ Warning: Only ${e.length} days of data available. 200-day MA may be incomplete.`);const c=e.map((n,r)=>{const o=((e,n)=>{for(var r in n||(n={}))s.call(n,r)&&t(e,r,n[r]);if(a)for(var r of a(n))l.call(n,r)&&t(e,r,n[r]);return e})({},n);if(r>=119){const a=e.slice(r-119,r+1).reduce((e,a)=>e+a.close,0);o.ma120=a/120}else o.ma120=null;if(r>=199){const a=e.slice(r-199,r+1).reduce((e,a)=>e+a.close,0);o.ma200=a/200}else o.ma200=null;return o});c.forEach((e,a)=>{a>0?(null!==e.ma120&&null!==c[a-1].ma120?e.ma120Slope=e.ma120-c[a-1].ma120:e.ma120Slope=null,null!==e.ma200&&null!==c[a-1].ma200?e.ma200Slope=e.ma200-c[a-1].ma200:e.ma200Slope=null):(e.ma120Slope=null,e.ma200Slope=null)});const d=c.filter(e=>null!==e.ma120Slope&&!isNaN(e.ma120Slope)),m=c.filter(e=>null!==e.ma200Slope&&!isNaN(e.ma200Slope));let h=null,p=null;return d.length>0&&(h=d.reduce((e,a)=>a.ma120Slope<e.ma120Slope?a:e),console.log(`ğŸ”´ 120ì¼ ìµœì € ê¸°ìš¸ê¸°: ${h.date} = ${h.ma120Slope.toFixed(6)}`)),m.length>0&&(p=m.reduce((e,a)=>a.ma200Slope<e.ma200Slope?a:e),console.log(`ğŸ”µ 200ì¼ ìµœì € ê¸°ìš¸ê¸°: ${p.date} = ${p.ma200Slope.toFixed(6)}`)),{ticker:n.toUpperCase(),period:r,data:c,analysis:{minSlope120:h,minSlope200:p,totalDays:c.length,ma120Days:d.length,ma200Days:m.length}}}handleAPIError(e){var a,s,l;return"ECONNABORTED"===e.code||e.message.includes("timeout")?new Error("Request timeout. Please try again."):429===(null==(a=e.response)?void 0:a.status)?new Error("API rate limit exceeded. Please wait a moment and try again."):401===(null==(s=e.response)?void 0:s.status)||403===(null==(l=e.response)?void 0:l.status)?new Error("API key invalid or expired. Please check your API configuration."):e}checkAPIStatus(){return n(this,null,function*(){try{return yield this.fetchStockData("AAPL","1"),{status:"ok",api:this.currentAPI}}catch(e){return{status:"error",error:e.message,api:this.currentAPI}}})}},P=({onClose:e})=>{const[a,s]=r.useState(""),[l,t]=r.useState("ALPHA_VANTAGE");return f.jsxs("div",{className:"api-settings",children:[f.jsxs("div",{className:"settings-header",children:[f.jsx("h3",{children:"âš™ï¸ API ì„¤ì •"}),f.jsx("button",{onClick:e,className:"close-btn",children:"âœ•"})]}),f.jsxs("div",{className:"settings-content",children:[f.jsxs("div",{className:"setting-group",children:[f.jsx("label",{children:"API ì„ íƒ:"}),f.jsxs("select",{value:l,onChange:e=>t(e.target.value),children:[f.jsx("option",{value:"ALPHA_VANTAGE",children:"Alpha Vantage (ì¶”ì²œ)"}),f.jsx("option",{value:"FINNHUB",children:"Finnhub"})]})]}),f.jsxs("div",{className:"setting-group",children:[f.jsx("label",{children:"API í‚¤:"}),f.jsx("input",{type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"API í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš”"})]}),f.jsxs("div",{className:"api-info",children:["ALPHA_VANTAGE"===l&&f.jsxs("p",{children:["ë¬´ë£Œ í‚¤: ",f.jsx("a",{href:"https://www.alphavantage.co/support/#api-key",target:"_blank",rel:"noopener noreferrer",children:"alphavantage.co"})," (500 calls/day)"]}),"FINNHUB"===l&&f.jsxs("p",{children:["ë¬´ë£Œ í‚¤: ",f.jsx("a",{href:"https://finnhub.io",target:"_blank",rel:"noopener noreferrer",children:"finnhub.io"})," (60 calls/minute)"]})]}),f.jsxs("div",{className:"settings-actions",children:[f.jsx("button",{onClick:()=>{a.trim()?(F.setAPIKey(l,a.trim()),alert("API í‚¤ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!"),e()):alert("API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.")},className:"save-btn",children:"ì €ì¥"}),f.jsx("button",{onClick:e,className:"cancel-btn",children:"ì·¨ì†Œ"})]})]}),f.jsx("style",{jsx:!0,children:"\n        .api-settings {\n          background: white;\n          border-radius: 12px;\n          padding: 1.5rem;\n          margin-bottom: 1rem;\n          box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n          border: 1px solid #e1e8ed;\n        }\n        \n        .settings-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 1rem;\n          padding-bottom: 0.5rem;\n          border-bottom: 1px solid #e9ecef;\n        }\n        \n        .close-btn {\n          background: none;\n          border: none;\n          font-size: 1.2rem;\n          cursor: pointer;\n          color: #666;\n        }\n        \n        .setting-group {\n          margin-bottom: 1rem;\n        }\n        \n        .setting-group label {\n          display: block;\n          margin-bottom: 0.5rem;\n          font-weight: 600;\n          color: #555;\n        }\n        \n        .setting-group input,\n        .setting-group select {\n          width: 100%;\n          padding: 0.75rem;\n          border: 2px solid #e1e8ed;\n          border-radius: 6px;\n          font-size: 0.9rem;\n        }\n        \n        .api-info {\n          background: #f8f9fa;\n          padding: 0.75rem;\n          border-radius: 6px;\n          margin-bottom: 1rem;\n          font-size: 0.9rem;\n        }\n        \n        .api-info a {\n          color: #667eea;\n          text-decoration: none;\n        }\n        \n        .settings-actions {\n          display: flex;\n          gap: 0.5rem;\n          justify-content: flex-end;\n        }\n        \n        .save-btn, .cancel-btn {\n          padding: 0.5rem 1rem;\n          border: none;\n          border-radius: 6px;\n          cursor: pointer;\n          font-weight: 600;\n        }\n        \n        .save-btn {\n          background: #667eea;\n          color: white;\n        }\n        \n        .cancel-btn {\n          background: #e9ecef;\n          color: #555;\n        }\n      "})]})};function I(){const[e,a]=r.useState(null),[s,l]=r.useState(!1),[t,o]=r.useState(null),[i,c]=r.useState(""),[d,m]=r.useState(""),[h,p]=r.useState(!1);r.useEffect(()=>{u()},[]);const u=()=>n(this,null,function*(){try{const e=yield F.checkAPIStatus();"error"===e.status&&console.warn("API Status:",e.error)}catch(e){console.warn("Failed to check API status:",e.message)}}),x=r.useCallback((e,s)=>n(this,null,function*(){if(null==e?void 0:e.trim()){l(!0),o(null);try{console.log(`ğŸ“ˆ Loading data for ${e.toUpperCase()}, period: ${s}`);const l=yield F.fetchStockData(e,s);l&&l.data&&l.data.length>0?(a(l),c(e.toUpperCase()),m(s),console.log(`âœ… Successfully loaded ${l.data.length} days of data`),console.log(`ğŸ“Š 120-day MA points: ${l.analysis.ma120Days}`),console.log(`ğŸ“Š 200-day MA points: ${l.analysis.ma200Days}`)):(o("ì…ë ¥í•œ í‹°ì»¤ì— ëŒ€í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),a(null))}catch(t){console.error("Error loading stock data:",t),o(t.message||"ì£¼ì‹ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”."),a(null)}finally{l(!1)}}else o("ì£¼ì‹ í‹°ì»¤ ì‹¬ë³¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”")}),[]);return f.jsxs("div",{className:"app",children:[f.jsx("header",{className:"app-header",children:f.jsxs("div",{className:"header-content",children:[f.jsx("h1",{children:"ğŸ“ˆ Stock Moving Averages Visualization"}),f.jsx("p",{children:"ì›ë³¸ yfiance-ma.pyì™€ ë™ì¼í•œ ë¶„ì„ ë¡œì§ | React + ë¬´ë£Œ API"}),f.jsx("button",{className:"api-settings-btn",onClick:()=>p(!h),children:"âš™ï¸ API ì„¤ì •"})]})}),f.jsxs("main",{className:"app-main",children:[h&&f.jsx(P,{onClose:()=>p(!1)}),f.jsx(w,{onLoadData:x,loading:s,defaultTicker:"QQQ"}),t&&f.jsx(D,{message:t}),s&&f.jsx($,{}),e&&!s&&f.jsxs(f.Fragment,{children:[f.jsx(S,{data:e,ticker:i,period:d}),f.jsx(A,{data:e,ticker:i})]}),!e&&!s&&!t&&f.jsx("div",{className:"welcome-message",children:f.jsxs("div",{className:"welcome-card",children:[f.jsx("h2",{children:"ğŸ“Š ì£¼ì‹ ì´ë™í‰ê· ì„  ë¶„ì„"}),f.jsx("p",{children:'ì£¼ì‹ í‹°ì»¤ë¥¼ ì…ë ¥í•˜ê³  "Load Data" ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.'}),f.jsxs("div",{className:"suggested-tickers",children:[f.jsx("h3",{children:"ì¶”ì²œ í‹°ì»¤:"}),f.jsx("div",{className:"ticker-tags",children:["MSFT","AAPL","NVDA","GOOGL","TSLA","AMZN","QQQ","SPY"].map(e=>f.jsx("span",{className:"ticker-tag",children:e},e))})]}),f.jsxs("div",{className:"features",children:[f.jsx("h3",{children:"ì£¼ìš” ê¸°ëŠ¥:"}),f.jsxs("ul",{children:[f.jsx("li",{children:"ğŸ“ˆ ì‹¤ì‹œê°„ ì£¼ì‹ ë°ì´í„° (ë¬´ë£Œ API)"}),f.jsx("li",{children:"ğŸ“Š 120ì¼ & 200ì¼ ì´ë™í‰ê· ì„ "}),f.jsx("li",{children:"ğŸ¯ ìµœì € ê¸°ìš¸ê¸° ì§€ì  ë¶„ì„"}),f.jsx("li",{children:"ğŸ“± ë°˜ì‘í˜• ë””ìì¸"})]})]})]})})]}),f.jsx("footer",{className:"app-footer",children:f.jsxs("p",{children:["Made with React + Vite |",f.jsx("a",{href:"https://github.com/yourusername/stock-app",target:"_blank",rel:"noopener noreferrer",children:"GitHub"})]})})]})}b.createRoot(document.getElementById("root")).render(f.jsx(i.StrictMode,{children:f.jsx(I,{})}));
//# sourceMappingURL=index-8bc9714d.js.map
